if [[ $1 == "" ]]; then 
    exit 1
fi

POS_BEGIN=`nmcli device wifi             | head -n 1 | awk '{print index($0, " SSID ")}'`
POS_END=$(( `nmcli device wifi | head -n 1 | awk '{print index($0, "MODE")}'` - 1 ))

counter=0
IFS=$'\n'
# for loop with spaces in for
for each_connection in `nmcli device wifi | tail -n +2 | grep -v "WPA2" | grep -v "WEP" | grep -v "Vodafone" | cut -c${POS_BEGIN}-${POS_END} | awk '{print $2}'`; do
	counter=$(( counter + 1 ))
    if [[ $counter == $1 ]]; then
	    echo "attempt to connect to: "$each_connection
        nmcli device wifi connect `echo $each_connection | awk '{print $1}'`    
        exit 0
    fi
done
unset IFS
echo "attempt to connect to $1"
nmcli device wifi connect $1
