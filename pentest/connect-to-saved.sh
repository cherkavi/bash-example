# sudo apt install network-manager

if [[ $1 == "" ]]; then
	echo "name of the network should be specified"
	exit 1
fi

counter=0
for each_connection in `nmcli connection | tail -n +2 | awk '{print "\""$1"\""}'`; do
	counter=$(( counter + 1 ))
done


# find length find position
length=`nmcli connection | head -n 1 | awk '{print index($0,"UUID")}'`

counter=0
IFS=$'\n'    # for loop with spaces in filenames
for each_connection in `nmcli connection | cut -c1-$(( length -1 )) | tail -n +2 `; do
	counter=$(( counter + 1 ))
	if [[ $counter == $1 ]]; then
		echo "attempt to connect to: $each_connection"
		nmcli device wifi connect  $each_connection
		exit 0
	fi
done
unset IFS
# attempt to connect to network by name
nmcli device wifi connect $1
